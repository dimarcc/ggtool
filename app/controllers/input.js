import Ember from 'ember';
import math from 'npm:mathjs';

export default Ember.Controller.extend({

  actions: {

    numfixS:null,

    init() {
      console.log('controller init function');
      this.set('numfixS',null);
    },

    calculateValue() {

      var supplyPower = this.get('psuS').get('supplyPower'); //PT *corresponds with matlab code*
      console.log(supplyPower);
      var supplyVoltage = this.get('psuS').get('supplyVoltage'); //VS
      console.log(supplyVoltage);
      var ldrIntRes = this.get('ldrS').get('ldrIntRes'); //RL
      console.log(ldrIntRes);
      var jmpIntRes = this.get('jmpS').get('jmpIntRes'); //RJ
      console.log(jmpIntRes);
      var wpxIntRes = this.get('wpxS').get('wpxIntRes'); //RI
      console.log(wpxIntRes);
      var wpxPower = this.get('wpxS').get('wpxPower'); //P0
      console.log(wpxPower);
      var numfix = this.get('numfixS');  //N
      console.log(numfix);

      //var nodeVoltages = [supplyVoltage,];
      //console.log(nodeVoltage);



      function calc(supplyVoltage,ldrIntRes,jmpIntRes,wpxIntRes,wpxPower,numfix) {

        var V = supplyVoltage; //Vth
        //console.log(V);
        var Q = ldrIntRes;     //Rth
        //console.log(Q);
        var P = wpxPower;
        //console.log(P);
        var R = wpxIntRes;
        //console.log(R);

        var i, nodeVoltages;

        for (i=0,nodeVoltages=[supplyVoltage]; i < numfix; i++) {

          var expression1 = "-(-Q*V-2*R*V)/(4*(Q+R))+1/2*sqrt((-Q*V-2*R*V)^2/(4*(Q+R)^2)-(2*(2*P*Q^2+2*P*R*Q+R*V^2))/(3*(Q+R))+(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)/(3*2^(1/3)*(Q+R))+(2^(1/3)*(12*P^2*R*(Q+R)*Q^2+6*P*R*V*(-Q*V-2*R*V)*Q+(2*P*Q^2+2*P*R*Q+R*V^2)^2))/(3*(Q+R)*(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)))+1/2*sqrt((-Q*V-2*R*V)^2/(2*(Q+R)^2)-(4*(2*P*Q^2+2*P*R*Q+R*V^2))/(3*(Q+R))-(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)/(3*2^(1/3)*(Q+R))-(2^(1/3)*(12*P^2*R*(Q+R)*Q^2+6*P*R*V*(-Q*V-2*R*V)*Q+(2*P*Q^2+2*P*R*Q+R*V^2)^2))/(3*(Q+R)*(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3))+(-(-Q*V-2*R*V)^3/(Q+R)^3+(4*(2*P*Q^2+2*P*R*Q+R*V^2)*(-Q*V-2*R*V))/(Q+R)^2+(16*P*Q*R*V)/(Q+R))/(4*sqrt((-Q*V-2*R*V)^2/(4*(Q+R)^2)-(2*(2*P*Q^2+2*P*R*Q+R*V^2))/(3*(Q+R))+(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)/(3*2^(1/3)*(Q+R))+(2^(1/3)*(12*P^2*R*(Q+R)*Q^2+6*P*R*V*(-Q*V-2*R*V)*Q+(2*P*Q^2+2*P*R*Q+R*V^2)^2))/(3*(Q+R)*(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)))))";

          var expression2 = "-((-R*V+Q*(-(-Q*V-2*R*V)/(4*(Q+R))+1/2*sqrt((-Q*V-2*R*V)^2/(4*(Q+R)^2)-(2*(2*P*Q^2+2*P*R*Q+R*V^2))/(3*(Q+R))+(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)/(3*2^(1/3)*(Q+R))+(2^(1/3)*(12*P^2*R*(Q+R)*Q^2+6*P*R*V*(-Q*V-2*R*V)*Q+(2*P*Q^2+2*P*R*Q+R*V^2)^2))/(3*(Q+R)*(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)))+1/2*sqrt((-Q*V-2*R*V)^2/(2*(Q+R)^2)-(4*(2*P*Q^2+2*P*R*Q+R*V^2))/(3*(Q+R))-(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)/(3*2^(1/3)*(Q+R))-(2^(1/3)*(12*P^2*R*(Q+R)*Q^2+6*P*R*V*(-Q*V-2*R*V)*Q+(2*P*Q^2+2*P*R*Q+R*V^2)^2))/(3*(Q+R)*(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3))+(-(-Q*V-2*R*V)^3/(Q+R)^3+(4*(2*P*Q^2+2*P*R*Q+R*V^2)*(-Q*V-2*R*V))/(Q+R)^2+(16*P*Q*R*V)/(Q+R))/(4*sqrt((-Q*V-2*R*V)^2/(4*(Q+R)^2)-(2*(2*P*Q^2+2*P*R*Q+R*V^2))/(3*(Q+R))+(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)/(3*2^(1/3)*(Q+R))+(2^(1/3)*(12*P^2*R*(Q+R)*Q^2+6*P*R*V*(-Q*V-2*R*V)*Q+(2*P*Q^2+2*P*R*Q+R*V^2)^2))/(3*(Q+R)*(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3))))))+R*(-(-Q*V-2*R*V)/(4*(Q+R))+1/2*sqrt((-Q*V-2*R*V)^2/(4*(Q+R)^2)-(2*(2*P*Q^2+2*P*R*Q+R*V^2))/(3*(Q+R))+(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)/(3*2^(1/3)*(Q+R))+(2^(1/3)*(12*P^2*R*(Q+R)*Q^2+6*P*R*V*(-Q*V-2*R*V)*Q+(2*P*Q^2+2*P*R*Q+R*V^2)^2))/(3*(Q+R)*(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)))+1/2*sqrt((-Q*V-2*R*V)^2/(2*(Q+R)^2)-(4*(2*P*Q^2+2*P*R*Q+R*V^2))/(3*(Q+R))-(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)/(3*2^(1/3)*(Q+R))-(2^(1/3)*(12*P^2*R*(Q+R)*Q^2+6*P*R*V*(-Q*V-2*R*V)*Q+(2*P*Q^2+2*P*R*Q+R*V^2)^2))/(3*(Q+R)*(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3))+(-(-Q*V-2*R*V)^3/(Q+R)^3+(4*(2*P*Q^2+2*P*R*Q+R*V^2)*(-Q*V-2*R*V))/(Q+R)^2+(16*P*Q*R*V)/(Q+R))/(4*sqrt((-Q*V-2*R*V)^2/(4*(Q+R)^2)-(2*(2*P*Q^2+2*P*R*Q+R*V^2))/(3*(Q+R))+(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)/(3*2^(1/3)*(Q+R))+(2^(1/3)*(12*P^2*R*(Q+R)*Q^2+6*P*R*V*(-Q*V-2*R*V)*Q+(2*P*Q^2+2*P*R*Q+R*V^2)^2))/(3*(Q+R)*(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)))))))*((-(-Q*V-2*R*V)/(4*(Q+R))+1/2*sqrt((-Q*V-2*R*V)^2/(4*(Q+R)^2)-(2*(2*P*Q^2+2*P*R*Q+R*V^2))/(3*(Q+R))+(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)/(3*2^(1/3)*(Q+R))+(2^(1/3)*(12*P^2*R*(Q+R)*Q^2+6*P*R*V*(-Q*V-2*R*V)*Q+(2*P*Q^2+2*P*R*Q+R*V^2)^2))/(3*(Q+R)*(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)))+1/2*sqrt((-Q*V-2*R*V)^2/(2*(Q+R)^2)-(4*(2*P*Q^2+2*P*R*Q+R*V^2))/(3*(Q+R))-(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)/(3*2^(1/3)*(Q+R))-(2^(1/3)*(12*P^2*R*(Q+R)*Q^2+6*P*R*V*(-Q*V-2*R*V)*Q+(2*P*Q^2+2*P*R*Q+R*V^2)^2))/(3*(Q+R)*(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3))+(-(-Q*V-2*R*V)^3/(Q+R)^3+(4*(2*P*Q^2+2*P*R*Q+R*V^2)*(-Q*V-2*R*V))/(Q+R)^2+(16*P*Q*R*V)/(Q+R))/(4*sqrt((-Q*V-2*R*V)^2/(4*(Q+R)^2)-(2*(2*P*Q^2+2*P*R*Q+R*V^2))/(3*(Q+R))+(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)/(3*2^(1/3)*(Q+R))+(2^(1/3)*(12*P^2*R*(Q+R)*Q^2+6*P*R*V*(-Q*V-2*R*V)*Q+(2*P*Q^2+2*P*R*Q+R*V^2)^2))/(3*(Q+R)*(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3))))))^2-V*(-(-Q*V-2*R*V)/(4*(Q+R))+1/2*sqrt((-Q*V-2*R*V)^2/(4*(Q+R)^2)-(2*(2*P*Q^2+2*P*R*Q+R*V^2))/(3*(Q+R))+(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)/(3*2^(1/3)*(Q+R))+(2^(1/3)*(12*P^2*R*(Q+R)*Q^2+6*P*R*V*(-Q*V-2*R*V)*Q+(2*P*Q^2+2*P*R*Q+R*V^2)^2))/(3*(Q+R)*(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)))+1/2*sqrt((-Q*V-2*R*V)^2/(2*(Q+R)^2)-(4*(2*P*Q^2+2*P*R*Q+R*V^2))/(3*(Q+R))-(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)/(3*2^(1/3)*(Q+R))-(2^(1/3)*(12*P^2*R*(Q+R)*Q^2+6*P*R*V*(-Q*V-2*R*V)*Q+(2*P*Q^2+2*P*R*Q+R*V^2)^2))/(3*(Q+R)*(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3))+(-(-Q*V-2*R*V)^3/(Q+R)^3+(4*(2*P*Q^2+2*P*R*Q+R*V^2)*(-Q*V-2*R*V))/(Q+R)^2+(16*P*Q*R*V)/(Q+R))/(4*sqrt((-Q*V-2*R*V)^2/(4*(Q+R)^2)-(2*(2*P*Q^2+2*P*R*Q+R*V^2))/(3*(Q+R))+(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3)/(3*2^(1/3)*(Q+R))+(2^(1/3)*(12*P^2*R*(Q+R)*Q^2+6*P*R*V*(-Q*V-2*R*V)*Q+(2*P*Q^2+2*P*R*Q+R*V^2)^2))/(3*(Q+R)*(16*P^3*Q^6-96*P^3*R*Q^5-240*P^3*R^2*Q^4+15*P^2*R*V^2*Q^4-128*P^3*R^3*Q^3+84*P^2*R^2*V^2*Q^3-6*P*R^2*V^4*Q^2+96*P^2*R^3*V^2*Q^2-24*P*R^3*V^4*Q+2*R^3*V^6+sqrt(-6912*P^6*R*Q^11-20736*P^6*R^2*Q^10+864*P^5*R*V^2*Q^10-20736*P^6*R^3*Q^9+5184*P^5*R^2*V^2*Q^9-6912*P^6*R^4*Q^8-351*P^4*R^2*V^4*Q^8+7776*P^5*R^3*V^2*Q^8-1512*P^4*R^3*V^4*Q^7+3456*P^5*R^4*V^2*Q^7+108*P^3*R^3*V^6*Q^6-432*P^4*R^4*V^4*Q^6))^(1/3))))))+P*Q))/(P*Q^2)";

          var scope = {
              P: P,
              Q: Q,
              R: R,
              V: V,
          };

          var nodeVoltage1 = math.eval(expression1, scope);
          console.log(nodeVoltage1);
          nodeVoltages.push(nodeVoltage1);

          var nodeVoltage2 = math.eval(expression2, scope);
          console.log(nodeVoltage2);
          nodeVoltages.push(nodeVoltage2);

          var A = math.eval("(wpxIntRes^2)*(1/Q+1/wpxIntRes)");
          var B = math.eval("(V/Q)*wpxIntRes");
          var C = math.eval("wpxPower");
          var D = math.eval("B^2-4*A*C");

          var Isc = math.eval("-(sqrt(B^2-4*A*C)+B)/(2*A)");


        };

      return nodeVoltages;

    };

      var result = calc(supplyVoltage,ldrIntRes,jmpIntRes,wpxIntRes,wpxPower,numfix);
      console.log(result);
    }
  }
});
